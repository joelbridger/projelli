# Projelli v1.0.1 Issues - Windows 11 Testing Feedback

**Testing Date:** February 16, 2026
**Platform:** Windows 11 (.exe installer)
**Version Tested:** v1.0.0

---

## üî¥ CRITICAL (P0) - Blocking Core Functionality

### ISSUE-001: Claude Chat Network Error - "Failed to fetch: Network error or CORS issue"
- **Type:** Bug - Critical
- **Priority:** P0
- **Component:** AI Chat / Claude Provider
- **Status:** Open

**Description:**
When attempting to use Claude chat, the app shows an error:
```
‚ùå Error: Failed to fetch: Network error or CORS issue.
Make sure you're running the app with "npm run dev" at http://localhost:5173.
```

**Expected Behavior:**
Claude chat should connect to Anthropic API and respond to messages.

**Current Behavior:**
Error message appears, chat does not work.

**Root Cause (Suspected):**
The error message mentions "npm run dev" and localhost, suggesting:
1. Development-mode code leaked into production build
2. CORS configuration issue in production
3. Tauri CSP (Content Security Policy) blocking API calls

**Investigation Steps:**
1. Check `src/modules/models/ClaudeProvider.ts` for fetch calls
2. Verify `src-tauri/tauri.conf.json` CSP allows Anthropic API
3. Check if there's dev-mode conditional code that didn't get stripped

**Fix Required:**
- Remove dev-mode error messaging
- Ensure Tauri CSP allows `https://api.anthropic.com`
- Verify fetch calls work in production build
- Test with real API key

---

### ISSUE-002: "Open on Desktop" Button Fatal Error
- **Type:** Bug - Critical
- **Priority:** P0
- **Component:** Workspace / File System
- **Status:** Open

**Description:**
Clicking "Open on Desktop" button (bottom left) causes error:
```
Failed to open folder: TypeError: Cannot destructure property 'invoke'
of 'window.__TAURI__.tauri' as it is undefined.
```

**Expected Behavior:**
Opens the current workspace folder in Windows File Explorer.

**Current Behavior:**
Error dialog appears, nothing happens.

**Root Cause:**
Code is trying to access `window.__TAURI__.tauri.invoke` but:
1. Tauri v2 API structure is different (uses `@tauri-apps/api`)
2. Direct window object access instead of proper import

**Location:**
Likely in workspace-related components or utilities that handle "Open on Desktop" functionality.

**Fix Required:**
- Import from `@tauri-apps/plugin-shell` correctly
- Use `import { open } from '@tauri-apps/plugin-shell'`
- Update code to use modern Tauri v2 API

**Testing:**
After fix, verify button opens File Explorer to workspace folder.

---

## üü† HIGH (P1) - Impacts User Experience

### ISSUE-003: Unsent Chat Input Disappears on Navigation
- **Type:** Bug - Data Loss
- **Priority:** P1
- **Component:** AI Chat
- **Status:** Open

**Description:**
If user types message in AI chat input box but doesn't send it, then navigates to different folder/file, the typed text disappears.

**Expected Behavior:**
Unsent chat input should persist even when:
- Navigating to different files
- Switching folders
- Closing/reopening AI chat tab
- Switching between different AI chat instances

**Current Behavior:**
Text is lost immediately upon navigation.

**User Impact:**
Frustrating loss of work, especially for longer messages.

**Fix Approach:**
1. Store unsent input in state (per chat instance)
2. Use Zustand store to persist across navigation
3. Consider localStorage backup for crash recovery

**Implementation:**
- Update AI chat store to track `draftMessage` per chat ID
- Restore draft when chat is re-opened
- Clear draft only when message is sent
- Optional: Auto-save drafts to localStorage

---

### ISSUE-004: Update Claude Models to Include Opus 4.6
- **Type:** Enhancement - Missing Feature
- **Priority:** P1
- **Component:** AI Models / Provider
- **Status:** Open

**Description:**
Claude model selector doesn't include the new Claude Opus 4.6 model.

**Expected Behavior:**
All current Claude models should be available:
- Claude Opus 4.6 (latest, released Nov 2025)
- Claude Sonnet 4.5
- Claude Haiku 4

**Current Models:**
Likely outdated list from earlier development.

**Fix Required:**
Update `src/modules/models/ClaudeProvider.ts`:
```typescript
const CLAUDE_MODELS = [
  'claude-opus-4-6-20251101',      // NEW - Add this
  'claude-sonnet-4-5-20250929',
  'claude-haiku-4-20250107'
];
```

**Also Check:**
- Update UI model selector dropdown
- Update any model descriptions/tooltips
- Verify pricing info if displayed

---

### ISSUE-005: AI Chat Titles Use Dates Instead of Sequential Names
- **Type:** Enhancement - UX
- **Priority:** P1
- **Component:** AI Chat
- **Status:** Open

**Description:**
New AI chats are titled with current date (e.g., "2026-02-16") instead of user-friendly sequential names.

**Expected Behavior:**
Chats should be titled:
- "Claude Chat 1"
- "Claude Chat 2"
- "ChatGPT Chat 1"
- "Gemini Chat 1"

Where the number increments for each new chat with that provider.

**Current Behavior:**
Shows date stamps like "2026-02-16".

**Implementation:**
1. Track chat count per provider in store
2. Generate title: `${providerName} Chat ${count}`
3. Allow user to rename chats later (optional enhancement)

**Code Location:**
Likely in `src/stores/aiChatStore.ts` or chat creation function.

---

## üü° MEDIUM (P2) - Polish & Improvements

### ISSUE-006: Top Bar Shows Abbreviated Path Instead of Project Name
- **Type:** Bug - UI/UX
- **Priority:** P2
- **Component:** Status Bar / Workspace
- **Status:** Open

**Description:**
Top left of app shows abbreviated folder path (e.g., "C:/Use.../proj...") instead of clean project name.

**Expected Behavior:**
Should display:
- **Project name** (from workspace folder name)
- Not the full path
- Example: "Projelli Docs" instead of "C:/Users/.../projelli-docs"

**Current Behavior:**
Shows truncated/abbreviated path that's hard to read.

**Fix Approach:**
1. Extract folder name from workspace path
2. Display only the folder name (last segment of path)
3. Show full path only on hover (tooltip)

**Code Location:**
Likely in `src/components/layout/StatusBar.tsx` or similar.

---

### ISSUE-007: Remove Non-Functional "Close AI Assistant Pane" Button
- **Type:** Bug - Dead Code
- **Priority:** P2
- **Component:** AI Assistant
- **Status:** Open

**Description:**
There's a "Close AI Assistant Pane" button in the AI assistant tab that doesn't work and appears to be leftover from old UI.

**Expected Behavior:**
Button should be completely removed.

**Current Behavior:**
Button exists but does nothing when clicked.

**Fix Required:**
1. Find button in `src/components/ai/` components
2. Remove button and its click handler
3. Clean up any related state management

**Search For:**
- "Close AI Assistant Pane" text
- Likely in AIAssistantPane.tsx or AIChatViewer.tsx

---

### ISSUE-008: Enable Drag-Drop Files/Folders to Breadcrumb Navigation
- **Type:** Enhancement - UX
- **Priority:** P2
- **Component:** File Grid View / Navigation
- **Status:** Open

**Description:**
In file grid view, users cannot drag files or folders back to previous locations using the breadcrumb trail.

**Expected Behavior:**
User should be able to:
1. Drag a file or folder
2. Drop it onto any breadcrumb segment
3. File/folder moves to that location

**Example:**
- Current path: `Projects/Projelli/src/components/`
- User drags `Button.tsx` from `components/`
- Drops it on "src" breadcrumb
- File moves to `Projects/Projelli/src/Button.tsx`

**Current Behavior:**
Breadcrumbs are not drop targets.

**Implementation:**
1. Make breadcrumb segments valid drop zones
2. Detect when file is dragged over breadcrumb
3. Show visual feedback (highlight breadcrumb segment)
4. On drop, move file to that directory
5. Handle permissions and validation

**Code Location:**
- Breadcrumb component (navigation)
- File grid drag-drop handlers

---

## üü¢ LOW (P3) - Nice to Have

### ISSUE-009: Improve Windows Installer Visual Design
- **Type:** Enhancement - Branding
- **Priority:** P3
- **Component:** Installer / NSIS
- **Status:** Open

**Description:**
Installation windows use default Windows installer styling. They should match Projelli's website visual style for better brand experience.

**Expected Behavior:**
Custom installer with:
- Projelli branding colors
- Custom header/banner image
- Modern, clean design matching website
- Professional appearance

**Current Behavior:**
Generic Windows installer appearance.

**Implementation:**
Requires customizing NSIS (Nullsoft Scriptable Install System) configuration:

**Changes Needed:**
1. **Create installer banner image** (164x314 pixels)
   - Match Projelli color scheme (blues/purples)
   - Include logo and tagline

2. **Update `src-tauri/tauri.conf.json`:**
   ```json
   "windows": {
     "nsis": {
       "installerIcon": "icons/icon.ico",
       "headerImage": "icons/installer-header.bmp",
       "sidebarImage": "icons/installer-sidebar.bmp",
       "installMode": "currentUser",
       "languages": ["English"]
     }
   }
   ```

3. **Create custom NSIS script** (advanced):
   - Custom page layouts
   - Brand colors
   - Custom fonts (if desired)

**Assets Needed:**
- installer-header.bmp (150x57 pixels, 24-bit BMP)
- installer-sidebar.bmp (164x314 pixels, 24-bit BMP)

**References:**
- Tauri NSIS docs: https://tauri.app/v1/guides/building/windows
- NSIS documentation: https://nsis.sourceforge.io/Docs/

**Note:** This is cosmetic and doesn't affect functionality. Can be done for v1.1.0 or later.

---

## üìä Summary

| Priority | Count | Issues |
|----------|-------|--------|
| P0 (Critical) | 2 | #001, #002 |
| P1 (High) | 3 | #003, #004, #005 |
| P2 (Medium) | 3 | #006, #007, #008 |
| P3 (Low) | 1 | #009 |
| **TOTAL** | **9** | |

---

## üéØ Recommended Fix Order for v1.0.1

### Phase 1: Critical Fixes (Must Fix)
1. **ISSUE-001** - Claude chat network error
2. **ISSUE-002** - Open on Desktop button error

### Phase 2: High Priority (Should Fix)
3. **ISSUE-004** - Add Opus 4.6 model
4. **ISSUE-003** - Persist unsent chat input
5. **ISSUE-005** - Better chat titles

### Phase 3: Polish (Nice to Fix)
6. **ISSUE-007** - Remove dead button
7. **ISSUE-006** - Show project name not path

### Phase 4: Defer to v1.1.0
8. **ISSUE-008** - Breadcrumb drag-drop (more complex)
9. **ISSUE-009** - Custom installer design (cosmetic)

---

## üöÄ Next Steps

1. **Create GitHub Issues** - Convert these to actual GitHub issues
2. **Fix P0 Issues** - Get Claude chat and Open on Desktop working
3. **Test Fixes** - Verify on Windows 11
4. **Release v1.0.1** - Ship critical fixes
5. **Continue with P1/P2** - Address in subsequent patches

---

**Created:** 2026-02-16
**Status:** Ready for implementation
**Target Release:** v1.0.1 (P0+P1), v1.1.0 (P2+P3)
